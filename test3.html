<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    

    <div id="downloadlink"></div>

    <br><br><br><br><br>
    <video id="video"></video>
    <canvas id="canvas"></canvas><br>
    <button onclick="snap()">snap</button>

    <script type="text/javascript">
    var video = document.getElementById('video');
    var canvas = document.getElementById('canvas');
    var context = canvas.getContext('2d');

    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.oGetUserMedia || navigator.msGetUserMedia;

    if(navigator.getUserMedia)
    {
        console.log(navigator.getUserMedia);
        navigator.getUserMedia({video:true}, streamWebCam, throwError);
    }

    function streamWebCam(stream){

      //  video.src = window.URL.createObjectURL(stream);
      video.srcObject = stream;
        video.play();
        console.log(stream);
        console.log(video.play());
    }
    function throwError(e) {
        console.log('error page')
        alert(e.name);
    }
    function snap() {
        canvas.width = video.clientWidth;
        canvas.height = video.clientHeight;
        context.drawImage(video,10,10);
        console.log(context);
        console.log(canvas);
        const imagelink = document.createElement('a');
        const text = document.createTextNode(" download link");
        imagelink.appendChild(text);
        imagelink.href = "http://www.google.com/";
        imagelink.createAttribute('download')

        document.getElementById('downloadlink').appendChild(imagelink);;
        console.log(imagelink);

    }
    
    
    </script>
 



</body>
</html>